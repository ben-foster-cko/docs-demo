type: object
required:
  - currency
  - source
properties:
  amount:
    type: integer
    description: |
      The payment amount in the major currency.
      Omitting the amount or providing 0 will perform a card verification.
    minimum: 0
    example: 6540
  currency:
    type: string
    description: |
      The three-letter ISO currency code
    example: USD
    maxLength: 3
    minLength: 3
  source:
    type: object
    description: The payment source
    allOf:
      - $ref: '#/definitions/CardSource'
  customer:
    type: object
    description: Details of the customer associated with the payment
    properties:
      email:
        type: string
        format: email
        description: An optional email address to associate with the customer
        example: darkknight@batcave.com
      name:
        type: string
        description: The customer's name. This will only set the name for *new* customers
        example: Jack Napier
  shipping:
    type: object
    description: The payment shipping details
    properties:
      address:
        description: The shipping address
        allOf:
          - $ref: '#/definitions/Address'
      phone:
        type: string
        description: The phone number associated with the shipping address
        example: +44 7776 054321
  capture:
    type: boolean
    description: Whether to capture the payment (if applicable)
    default: true
    example: true
  capture_on:
    description: An ISO 8601 timestamp that determines when the payment should be captured. Only applied when `capture` is `true`
    allOf:
      - $ref: '#/definitions/Timestamp'
  3ds:
    type: boolean
    description: Whether to process this payment as a 3D-Secure
    default: false
    example: true
  attempt_n3d: 
    type: boolean
    description: |
      Determines whether to attempt a 3D-Secure payment as non-3DS 
      should the card issuer not be enrolled.
      [Read more](https://docs.checkout.com/getting-started/merchant-api/3d-secure-charges/attempt-non-3d-secure-charge) for more information.
    default: false
    example: true
  reference:
    type: string
    description: A reference you can later use to identify this payment such as an order number
    example: ORD-5023-4E89
  description:
    type: string
    description: A description of the payment
    example: Set of 3 masks
  purchase_ip:
    description: The IP address used to make the purchase. Required for some risk checks
    allOf:
      - $ref: '#/definitions/IPAddress'
  metadata:
    type: object
    description: Set of key/value pairs that you can attach to a payment. It can be useful for storing additional information in a structured format
    example:
      coupon_code: "NY2018"
      partner_id: 123989
  billing_descriptor:
    $ref: '#/definitions/BillingDescriptor'
  skip_risk_check:
    type: boolean
    description: Indicates whether risk checks for the requested payment should be skipped
    default: false
    example: true
  recipient:
    $ref: '#/definitions/PaymentRecipient'
  destinations:
    type: array
    items:
      - $ref: '#/definitions/PaymentDestination'
    minItems: 0
    description: |
      For OpenPay payments, destinations determine the proportion of the payment amount that should 
      be credited to other OpenPay accounts
  items:
    type: array
    items:
      - $ref: '#/definitions/Item'
    minItems: 0
    description: |
      The items or products associated with the payment